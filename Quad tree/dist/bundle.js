!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(1);n(2);const i=o(n(3));console.log("STARTING WORLD BUCKETING TEST");let s=new i.default(6,0,1/0,0,1/0);function r(t){let e=[];switch(t){case"tl":e=[l(0,500),l(0,500)];break;case"tr":e=[l(500,1e3),l(0,500)];break;case"bl":e=[l(0,500),l(500,1e3)];break;case"br":e=[l(500,1e3),l(500,1e3)]}console.log("New cell: ",e),document.getElementById("cell-added-ui").textContent=JSON.stringify(e),s.add(e)}function l(t,e){return Math.round(Math.random()*(e-t)+t)}!async function(){(function(){const t=document.getElementById("btn-addcell-tl"),e=document.getElementById("btn-addcell-tr"),n=document.getElementById("btn-addcell-bl"),o=document.getElementById("btn-addcell-br");t.addEventListener("click",()=>r("tl")),e.addEventListener("click",()=>r("tr")),n.addEventListener("click",()=>r("bl")),o.addEventListener("click",()=>r("br"))})(),console.log("GLOBAL cluster: ",s),window.world=s}()},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Timeline=class{constructor(t){this.NAME=t,this.TIMES=new Map,this.START_TIME=Date.now(),this.PREVIOUS_TIME=Date.now(),this.RUN_DURATION=0}mark(t){this.TIMES.set(t,Date.now()-this.PREVIOUS_TIME),this.RUN_DURATION+=Date.now()-this.PREVIOUS_TIME,this.PREVIOUS_TIME=Date.now()}get(t){const e=this.TIMES.get(t);return null!==e?e:"null"}setLogThereshold(t){this.LOG_TO_CONSOLE_THRESHOLD=t}end(t=!1){this.END_TIME=Date.now(),this.RUN_DURATION=this.END_TIME-this.START_TIME,this.TIMES.set("TOTAL",this.RUN_DURATION),t?console.log(this.NAME,this.TIMES):this.LOG_TO_CONSOLE_THRESHOLD&&this.RUN_DURATION>this.LOG_TO_CONSOLE_THRESHOLD&&console.log(this.NAME,this.TIMES)}},e.hexToRGB=function(t){"#"===t[0]&&(t=t.slice(1));var e=parseInt(t,16);return[e>>16&255,e>>8&255,255&e]},e.rgbToHex=function(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},e.randomRGB=function(){return[Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())]},e.setTimeoutPromise=function(t){return new Promise((e,n)=>{setTimeout(()=>e(),t)})};const o=new class{constructor(){this.Log=new Map,this.CONSOLE_EL=document.getElementById("console")}log(t,e){this.Log.set(t,e)}time(t,e){this.Log.set(t+" ms",Math.round(e)),e>100&&console.log(t+" : "+e)}printLogToConsole(){const t=this.CONSOLE_EL.getElementsByClassName("log").item(0);if(t){t.innerHTML="";for(let e of this.Log){let n=e[1];if(!n)continue;const o=document.createElement("div"),i=document.createElement("span"),s=document.createElement("span");i.innerHTML=e[0].toString(),s.innerHTML=n.toString(),o.append(i,s),o.className="entry",t.append(o)}}}};e.LOGGER=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class o{constructor(t,e,n,o,i){this.N_POINTS=t,this.MIN_X=e,this.MAX_X=n,this.MIN_Y=o,this.MAX_Y=i,this.DATA=new Uint16Array(2*t)}add(t){if(!this.CHILDREN){let e=0;for(e=0;e<this.DATA.length;e+=2)if(!this.DATA[e]&&!this.DATA[e+1]){this.DATA[e]=t[0],this.DATA[e+1]=t[1];break}console.log("\n"),console.log("I recieved a cell, my bounding box is: X "+this.MIN_X+" to "+this.MAX_X+", Y "+this.MIN_Y+" to "+this.MAX_Y),console.log("Added to own data: ",this.DATA),e>=this.DATA.length-2&&this.splitIntoFour()}if(this.CHILDREN){this.findChildWithCell(t).add(t)}}has(t){if(!this.CHILDREN){for(let e=0;e<this.DATA.length&&(this.DATA[e]||this.DATA[e+1]);e+=2)if(t[0]===this.DATA[e]&&t[1]===this.DATA[e+1])return!0;return!1}if(this.CHILDREN){return this.findChildWithCell(t).has(t)}}passDataIntoChildren(){let t=0;for(t=0;t<this.DATA.length&&(this.DATA[t]||this.DATA[t+1]);t+=2)this.add([this.DATA[t],this.DATA[t+1]]);delete this.DATA}findChildWithCell(t){if(!this.CHILDREN)throw new Error("No children to fit cell into");const e=t[0],n=t[1];for(let t of this.CHILDREN)if(e>=t.MIN_X&&e<=t.MAX_X&&n>=t.MIN_Y&&n<=t.MAX_Y)return t;throw new Error(`Did not find any children that could fit cell (${e}, ${n}): `)}splitIntoFour(){const{N_POINTS:t,MIN_X:e,MIN_Y:n,MAX_X:i,MAX_Y:s}=this,[r,l]=this.getCOG();console.log("Cluster full.."),console.log("Spliting by center of gravity of own cells: X: ",r,", Y: ",l),this.CHILDREN=[new o(t,e,r,n,l),new o(t,r,i,n,l),new o(t,e,r,l,s),new o(t,r,i,l,s)],console.log("Created children: ",this.CHILDREN),this.passDataIntoChildren()}getCOG(){let t=0,e=0,n=0;for(n=0;n<this.DATA.length&&(this.DATA[n]||this.DATA[n+1]);n+=2)t+=this.DATA[n],e+=this.DATA[n+1];return[Math.floor(t/(n/2)),Math.floor(e/(n/2))]}}e.default=o}]);